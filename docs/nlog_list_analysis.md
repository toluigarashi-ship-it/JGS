# NLog実装方針（Check画面ベースでのList画面分析）

## 前提（現状）
- **Check画面**では、画面コンストラクタでNLog設定読み込みと初期化を行い、画面開始ログを出力している。
- **Check画面**では、画面終了時の終了ログ、主要例外箇所のエラーログを出力している。
- **List画面**では、現状NLogのusingや初期化処理、Info/Error出力が無く、例外時はMessageBox表示のみ。

## List画面で実装すべきか
結論として、**実装推奨**。

理由:
1. Check画面に対してList画面がログ空白になっており、画面遷移の入口（検索・遷移起点）のトレースが欠ける。
2. 障害時にMessageBoxのみだと運用保守側が事後調査しづらい（ユーザー文言しか残らない）。
3. List→Check遷移時のキー情報（Type/Id/表示インデックス）を残すことで、Check側エラー調査の前提情報が追える。

## 実装範囲（最小）
- 画面開始/終了ログ（Info）
  - `FrameSheetListForm` 生成時、`FormClosed`。
- 検索実行ログ（Info）
  - `SearchExecute` 開始/終了（件数、主要検索条件のサマリ）。
- 例外ログ（Error）
  - `SearchExecute` の catch で `ex` を含めて出力。
- Check画面遷移ログ（Info）
  - `OpenFrameSheetCheckFormForRow` 実行時に `CSVTYP/ID/keyIndex` を記録。

## 実装しない方がよいもの（現時点）
- テキスト変更イベント等の高頻度ログ（ノイズ増大）。
- 個人情報を含む詳細項目の生値出力（マスキング方針が無い限り回避）。

## 補足
- NLog初期化はCheck画面同様の重複初期化にせず、可能ならアプリ起動時の一元初期化へ寄せるのが望ましい。
- ただし現行設計に合わせるなら、List画面追加時はCheck画面実装と同レベルに揃えるだけでも運用価値は高い。
